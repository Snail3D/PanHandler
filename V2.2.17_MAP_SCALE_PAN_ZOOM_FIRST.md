# V2.2.17 - Map Scale: Pan/Zoom Before Setting Scale

## Issue
When clicking "Map Scale" button on calibration screen, the verbal scale modal opened immediately, preventing the user from panning/zooming to position the image before setting the scale.

## Previous Flow
```
1. Click "Map Scale" button
2. → Go to measurement screen
3. → Modal opens IMMEDIATELY ❌
4. → Can't pan/zoom to position image ❌
5. → Forced to set scale before positioning ❌
```

## New Flow
```
1. Click "Map Scale" button
2. → Go to measurement screen
3. → NO modal (can pan/zoom freely) ✅
4. → User positions image as needed ✅
5. → User taps "Map" button in menu ✅
6. → Modal opens, user sets scale ✅
```

## What Changed

### Before (v2.2.16)
```typescript
onSkipToMap={() => {
  setMode('measurement');
  setShowVerbalScaleModal(true);  // ← Opens immediately
}}
```

### After (v2.2.17)
```typescript
onSkipToMap={() => {
  setMode('measurement');
  // Modal does NOT open automatically
  // User can pan/zoom first, then tap Map button when ready
}}
```

## How It Works Now

### User Flow
1. **Take photo** → Calibration screen
2. **Tap "Map Scale" button** → Measurement screen (no modal)
3. **Pan/zoom image** → Position it correctly
4. **Tap "Map" button** in bottom menu
5. **Modal opens** → Set scale (e.g., "1 inch = 5 miles")
6. **Modal closes** → Start measuring

### Where's the Map Button?
In the measurement screen bottom menu, there's a "Map" button that:
- When OFF + tapped → Opens modal to set scale
- When ON + has scale → Shows celebratory haptics
- Toggles map mode on/off

## Technical Details

The Map button logic (DimensionOverlay.tsx, line ~6058):
```typescript
if (!isMapMode) {
  setIsMapMode(true);
  if (!mapScale) {
    // No scale yet - show modal to set scale
    setShowMapScaleModal(true);
  } else {
    // Already has scale - just turn on map mode
    // Celebratory haptics
  }
}
```

## Why This Is Better

### Old Way ❌
- Modal forced open immediately
- User stuck in modal, can't navigate image
- Have to set scale blindly without seeing full context
- Frustrating UX

### New Way ✅
- User arrives at measurement screen
- Can pan/zoom to find the right view
- Can see both reference points clearly
- Tap Map button when ready
- Set scale with full context

## User Experience

**Example: Measuring a park from a map image**
1. Take photo of map
2. Tap "Map Scale" → Measurement screen loads
3. Pan to see both the scale bar and the park
4. Zoom to right level
5. Tap "Map" button → Modal opens
6. Measure scale bar: "2cm on screen = 100m in real life"
7. Modal closes
8. Start measuring distances on the map

## Files Modified
- `/home/user/workspace/src/screens/MeasurementScreen.tsx` - Removed automatic modal open

## Version
v2.2.17
