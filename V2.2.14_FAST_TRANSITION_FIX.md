# V2.2.14 - Fixed Slow Transition to Calibration Screen

## Issue
After taking a photo, there was a huge lag before the calibration screen appeared. The transition felt sluggish and unresponsive.

## Root Causes

### 1. Unnecessary Delays in Transition
**Before:**
```typescript
// Flash happens
setTimeout(() => {
  setMode('zoomCalibrate');  // 30ms delay
}, 30);

setTimeout(() => {
  // Start animations           // 50ms delay
  cameraOpacity.value = withTiming(0, { duration: 150 });
  screenScale.value = withSequence(...);  // 75ms + 75ms animation
  
  setTimeout(() => {
    setIsTransitioning(false);  // 150ms delay
  }, 150);
}, 50);
```

**Total delays:** 30ms + 50ms + 150ms + 150ms animation = **380ms** just in timing delays!

### 2. Coin Selector Opening Delay
**Before:**
```typescript
setTimeout(() => setShowCoinSelector(true), 500);  // Always 500ms delay
```

Even if user already had a selected coin, there was a 500ms delay before UI appeared.

**Total perceived lag:** 380ms + 500ms = **880ms+** üò±

## Fixes

### 1. Removed Nested Delays
**After:**
```typescript
// Flash happens
setMode('zoomCalibrate');  // Immediate, no delay

// Start fade immediately
cameraOpacity.value = withTiming(0, {
  duration: 100,  // Fast 100ms fade
  easing: Easing.out(Easing.ease),
});

// Unlock after 100ms
setTimeout(() => {
  setIsTransitioning(false);
}, 100);
```

**New total:** ~100ms ‚ö°

### 2. Removed Coin Selector Delay for Returning Users
**After:**
```typescript
if (lastSelectedCoin) {
  const coin = getCoinByName(lastSelectedCoin);
  if (coin) {
    setSelectedCoin(coin);
    // No delay! Bottom bar appears immediately
  } else {
    setShowCoinSelector(true);  // Immediate if coin not found
  }
} else {
  setShowCoinSelector(true);  // Immediate for first-time users
}
```

### 3. Removed Unnecessary Animations
- ‚ùå Removed zoom morph animation (screenScale sequence)
- ‚ùå Removed nested setTimeout calls
- ‚úÖ Kept simple fade (100ms)
- ‚úÖ Instant mode switch

## Performance Comparison

| Scenario | Before | After |
|----------|--------|-------|
| **First-time user** (no coin) | 380ms transition + 500ms delay = 880ms | 100ms transition + 0ms = 100ms |
| **Returning user** (has coin) | 380ms transition + 500ms delay = 880ms | 100ms transition + 0ms = 100ms |

**Result:** 8.8x faster! üöÄ

## Expected Behavior Now

### First-Time User
1. Tap shutter
2. Flash effect (100ms)
3. **Calibration screen appears immediately** ‚úÖ
4. Coin selector shows (no delay)
5. Select coin
6. Bottom bar appears

### Returning User (Has Last Coin)
1. Tap shutter  
2. Flash effect (100ms)
3. **Calibration screen with bottom bar appears immediately** ‚úÖ
4. Can start calibrating right away

## Files Modified
- `/home/user/workspace/src/screens/MeasurementScreen.tsx`
- `/home/user/workspace/src/components/ZoomCalibration.tsx`

## Version
v2.2.14
