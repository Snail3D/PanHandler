# V2.2.8 - Coin Selector Moved to Top

## Change Summary
Moved coin selector from bottom of screen to top, with fade-in/fade-out animation.

## New Flow

### Before
```
Bottom of screen:
- No coin? Show search box at bottom
- Coin selected? Show LOCK IN + buttons
```

### After
```
Bottom of screen (always):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      LOCK IN           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇQuarter‚îÇ  ?  ‚îÇMap Scale ‚îÇ ‚Üê Tap coin to open selector
‚îÇ24.26mm‚îÇHelp ‚îÇ          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Top of screen (when coin tapped):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ü™ô Select Ref Coin     ‚îÇ ‚Üê Fades in
‚îÇ [Search box...]        ‚îÇ
‚îÇ - Quarter (24.26mm)    ‚îÇ
‚îÇ - Dime (17.91mm)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚Üì
         Select coin
                ‚Üì
          Fades out
```

## Implementation Details

### 1. **Animation State**
Added fade animation using reanimated:
```typescript
const coinSelectorOpacity = useSharedValue(0);
const coinSelectorTranslateY = useSharedValue(-20);

useEffect(() => {
  if (showCoinSelector) {
    coinSelectorOpacity.value = withTiming(1, { duration: 300 });
    coinSelectorTranslateY.value = withSpring(0, { damping: 20 });
  } else {
    coinSelectorOpacity.value = withTiming(0, { duration: 200 });
    coinSelectorTranslateY.value = withTiming(-20, { duration: 200 });
  }
}, [showCoinSelector]);
```

### 2. **Coin Button Handler**
Updated to toggle selector instead of clearing selection:
```typescript
onPress={() => {
  Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);
  setShowCoinSelector(true);  // Open selector at top
  setSearchQuery('');
}}
```

### 3. **Selector Position**
Changed from `bottom: insets.bottom + 40` to `top: insets.top + 16`:
- Appears below status bar
- Fades in with spring animation
- Auto-focuses search input

### 4. **Close on Selection**
When user selects a coin:
```typescript
onPress={() => {
  setSelectedCoin(coin);
  setLastSelectedCoin(coin.name);
  setSearchQuery('');
  setShowCoinSelector(false);  // ‚Üê Closes selector
}}
```

## User Experience

1. **User sees**: Bottom menu with current coin ("Quarter 24.26mm")
2. **User taps**: Coin button
3. **Selector fades in**: At top of screen with search focused
4. **User searches**: Types "dime" ‚Üí sees results
5. **User selects**: Taps "Dime"
6. **Selector fades out**: Returns to calibration screen
7. **Bottom menu updates**: Now shows "Dime 17.91mm"

## Benefits

‚úÖ **Clean bottom area**: All controls stay visible
‚úÖ **Top search feels natural**: Like iOS search patterns
‚úÖ **Smooth animation**: Fade in/out feels polished
‚úÖ **Keyboard friendly**: Appears near top where keyboard won't obscure
‚úÖ **Clear hierarchy**: Bottom = main controls, Top = temporary overlay

## Files Modified
- `/home/user/workspace/src/components/ZoomCalibration.tsx`

## Version
v2.2.8
